<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: models/endgameObject.class.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: models/endgameObject.class.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Represents the end game object responsible for managing the display
 * of end game screens such as the victory or game over screens.
 */
class EndGameObject {
  /**
   * Creates an instance of the EndGameObject.
   * @param {CanvasRenderingContext2D} ctx - The rendering context to draw on.
   * @param {HTMLCanvasElement} canvas - The canvas element.
   * @param {object} world - The game world.
   */
  constructor(ctx, canvas, world) {
    this.ctx = ctx;
    this.canvas = canvas;
    this.world = world;
  }

  /**
   * Displays the end screen after a delay, indicating the player has won.
   */
  showEndScreen() {
    setTimeout(() => {
      localStorage.setItem("gameIsRunning", "false");
      localStorage.setItem("gameWon", "true");
      localStorage.setItem("gameOver", "false");
      this.prepareForEndScreen();
      this.world.endScreenTriggered = true;
      this.drawEndScreen();
    }, 3000);
  }

  /**
   * Prepares the game for displaying the end screen by stopping animations,
   * muting sounds, and hiding all game objects.
   */
  prepareForEndScreen() {
    clearInterval(this.interval);
    this.world.gameIsRunning = false;
    this.world.character.stopAnimation();
    SoundManager.toggleMute(true);
    this.hideAllObjects();
    this.world.character.visible = false;
  }

  /**
   * Hides all game objects by making them invisible on the screen.
   */
  hideAllObjects() {
    if (this.world.enemies) {
      this.world.enemies.forEach((enemy) => (enemy.visible = false));
    }
    if (this.world.bottles) {
      this.world.bottles.forEach((bottle) => (bottle.visible = false));
    }
    if (this.world.coins) {
      this.world.coins.forEach((coin) => (coin.visible = false));
    }
  }

  /**
   * Draws the end screen image if it's loaded and triggers the end screen.
   */
  drawEndScreen() {
    if (this.world.endScreenTriggered &amp;&amp; this.world.endScreenImageLoaded) {
      this.ctx.drawImage(
        this.world.endScreenImage,
        0,
        0,
        this.canvas.width,
        this.canvas.height
      );
      this.drawRestartButton();
    }
  }

  /**
   * Draws the game over screen image if it's loaded.
   */
  drawGameOverScreen() {
    if (this.world.gameOverImageLoaded) {
      this.ctx.drawImage(
        this.world.gameOverImage,
        0,
        0,
        this.canvas.width,
        this.canvas.height
      );
      this.drawRestartButton();
    }
  }

  /**
   * Handles the game over logic, including setting local storage flags,
   * and preparing for showing the game over screen.
   */
  gameOver() {
    localStorage.setItem("gameIsRunning", "false");
    localStorage.setItem("gameOver", "true");
    this.world.gameOverTriggered = true;
    this.prepareForGameOver();
    this.drawGameOverScreen();
  }

  /**
   * Prepares the game for displaying the game over screen by stopping animations,
   * muting sounds, and hiding all game objects.
   */
  prepareForGameOver() {
    clearInterval(this.world.interval);
    this.world.gameIsRunning = false;
    this.world.character.stopAnimation();
    SoundManager.toggleMute(true);
    this.hideAllObjects();
    this.world.character.visible = false;
  }

  /**
   * Draws a restart button on the canvas.
   */
  drawRestartButton() {
    let x = this.canvas.width / 2 - 100;
    let y = 50;
    let width = 200;
    let height = 50;
    let borderRadius = 5;
    this.ctx.strokeStyle = "#2B1800";
    this.ctx.lineWidth = 3;
    this.ctx.beginPath();
    this.ctx.moveTo(x + borderRadius, y);
    this.ctx.lineTo(x + width - borderRadius, y);
    this.ctx.quadraticCurveTo(x + width, y, x + width, y + borderRadius);
    this.ctx.lineTo(x + width, y + height - borderRadius);
    this.ctx.quadraticCurveTo(
      x + width,
      y + height,
      x + width - borderRadius,
      y + height
    );
    this.ctx.lineTo(x + borderRadius, y + height);
    this.ctx.quadraticCurveTo(x, y + height, x, y + height - borderRadius);
    this.ctx.lineTo(x, y + borderRadius);
    this.ctx.quadraticCurveTo(x, y, x + borderRadius, y);
    this.ctx.closePath();
    this.ctx.fillStyle = "#FFB12F";
    this.ctx.fill();
    this.ctx.stroke();
    this.ctx.font = "25px rio-grande";
    this.ctx.fillStyle = "#fff";
    this.ctx.textAlign = "center";
    this.ctx.textBaseline = "middle";
    this.ctx.fillText("Restart", this.canvas.width / 2, y + height / 2);
  }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="BackgroundImage.html">BackgroundImage</a></li><li><a href="Bottle.html">Bottle</a></li><li><a href="Character.html">Character</a></li><li><a href="Chicken.html">Chicken</a></li><li><a href="ChickenBabies.html">ChickenBabies</a></li><li><a href="Cloud.html">Cloud</a></li><li><a href="Coin.html">Coin</a></li><li><a href="DrawableObject.html">DrawableObject</a></li><li><a href="EndGameObject.html">EndGameObject</a></li><li><a href="Endboss.html">Endboss</a></li><li><a href="InfoScreen.html">InfoScreen</a></li><li><a href="KeyboardObject.html">KeyboardObject</a></li><li><a href="Level.html">Level</a></li><li><a href="MoveableObject.html">MoveableObject</a></li><li><a href="SoundManager.html">SoundManager</a></li><li><a href="StartScreen.html">StartScreen</a></li><li><a href="Statusbar.html">Statusbar</a></li><li><a href="WorldObject.html">WorldObject</a></li><li><a href="throwAbleObject.html">throwAbleObject</a></li></ul><h3>Global</h3><ul><li><a href="global.html#adjustForMobileDevices">adjustForMobileDevices</a></li><li><a href="global.html#backgroundObjects">backgroundObjects</a></li><li><a href="global.html#checkScreenSize">checkScreenSize</a></li><li><a href="global.html#chickens">chickens</a></li><li><a href="global.html#chickensBabies">chickensBabies</a></li><li><a href="global.html#clouds">clouds</a></li><li><a href="global.html#coinGroups">coinGroups</a></li><li><a href="global.html#createCoinGroup">createCoinGroup</a></li><li><a href="global.html#enemies">enemies</a></li><li><a href="global.html#fullscreen">fullscreen</a></li><li><a href="global.html#groundBottles">groundBottles</a></li><li><a href="global.html#infoScreen">infoScreen</a></li><li><a href="global.html#init">init</a></li><li><a href="global.html#initializeGame">initializeGame</a></li><li><a href="global.html#isMobileDevice">isMobileDevice</a></li><li><a href="global.html#keybordActions">keybordActions</a></li><li><a href="global.html#level1">level1</a></li><li><a href="global.html#muteSounds">muteSounds</a></li><li><a href="global.html#startGame">startGame</a></li><li><a href="global.html#triggerGameOver">triggerGameOver</a></li><li><a href="global.html#triggerWin">triggerWin</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Tue Mar 19 2024 15:02:48 GMT+0100 (Mitteleurop√§ische Normalzeit)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
